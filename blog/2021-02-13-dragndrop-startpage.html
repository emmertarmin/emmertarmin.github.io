<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Drag&amp;Drop Startpage with mostly JavaScript | Armin Emmert</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon.png">
    <link rel="icon" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/assets/css/0.styles.9840e41a.css" as="style"><link rel="preload" href="/assets/js/app.aa9a9412.js" as="script"><link rel="preload" href="/assets/js/4.dd5e842c.js" as="script"><link rel="preload" href="/assets/js/11.940eb2b5.js" as="script"><link rel="preload" href="/assets/js/27.f51c2c29.js" as="script"><link rel="prefetch" href="/assets/js/1.ab89159c.js"><link rel="prefetch" href="/assets/js/10.829478fa.js"><link rel="prefetch" href="/assets/js/12.7560d376.js"><link rel="prefetch" href="/assets/js/13.baee6542.js"><link rel="prefetch" href="/assets/js/14.1b0e85e7.js"><link rel="prefetch" href="/assets/js/15.f2746fed.js"><link rel="prefetch" href="/assets/js/16.3c4e51f6.js"><link rel="prefetch" href="/assets/js/17.307b7538.js"><link rel="prefetch" href="/assets/js/18.acacac23.js"><link rel="prefetch" href="/assets/js/19.28a96e3b.js"><link rel="prefetch" href="/assets/js/20.d648b3cd.js"><link rel="prefetch" href="/assets/js/21.6de68a27.js"><link rel="prefetch" href="/assets/js/22.fa93aac1.js"><link rel="prefetch" href="/assets/js/23.04ce74ba.js"><link rel="prefetch" href="/assets/js/24.8cdd5719.js"><link rel="prefetch" href="/assets/js/25.d215aee9.js"><link rel="prefetch" href="/assets/js/26.71fa178c.js"><link rel="prefetch" href="/assets/js/28.6b1dfdd2.js"><link rel="prefetch" href="/assets/js/29.bbe02d86.js"><link rel="prefetch" href="/assets/js/30.3b6ab7e5.js"><link rel="prefetch" href="/assets/js/31.a7118fbe.js"><link rel="prefetch" href="/assets/js/5.b6bd2a5e.js"><link rel="prefetch" href="/assets/js/6.8e150a34.js"><link rel="prefetch" href="/assets/js/7.5854ab71.js"><link rel="prefetch" href="/assets/js/8.7e2b249d.js"><link rel="prefetch" href="/assets/js/9.b1c0964c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.dc76fa49.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9840e41a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/vuepress-blog-logo.png" alt="Armin Emmert" class="logo"> <span class="site-name can-hide">Armin Emmert</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/archive/" class="nav-link">Archive</a></div> <!----> <div class="nav-item"><label class="switch"><input type="checkbox" id="darkmode" name="darkmode"> <span class="slider"></span></label></div></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/archive/" class="nav-link">Archive</a></div> <!----> <div class="nav-item"><label class="switch"><input type="checkbox" id="darkmode" name="darkmode"> <span class="slider"></span></label></div></nav>  <!----> </div> <div class="blog" data-v-3a1d69e6><div class="blog__header" data-v-3a1d69e6><p class="publish-date" data-v-3a1d69e6><time datetime="2021-02-13 17:30" data-v-3a1d69e6>2021-02-13</time></p> <p data-v-3a1d69e6>Time to read: 6 min read</p> <h1 class="blog__title" data-v-3a1d69e6>Drag&amp;Drop Startpage with mostly JavaScript</h1></div> <div class="custom content__default" data-v-3a1d69e6><h2 id="motivation"><a href="#motivation" class="header-anchor">#</a> Motivation</h2> <p>First thing we learnt to do with html in high school was a startpage with a list of links. Some of my friends are still using that system to this day. They either host it on some free domain, or they run it from the computer's file system.</p> <p>I myself have been wanting to take a spin on this exercise for a long time, but I lacked the right idea, until I discovered that drag&amp;drop is actually humanly possible to implement in <a href="http://vanilla-js.com/" target="_blank" rel="noopener noreferrer">vanilla.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. I've never done this before, but drag&amp;drop functionality would be awesome, because it would make it super easy to update and change the underlying list of links. I realized I would love to learn how to do that, while I also saw it as the one feature that would make me comfortable enough to not abandon using the site.</p> <p>Of course there's many cool frameworks ready to do the heavy lifting, but I wanted my startpage to be opened from the file system instead of having to host it. This way I could have a simple html file and a single database file. It would be fast to load, easy to share with friends who know a bit of html, and I would retain the maximum level of ownership. I can switch between browsers, and keep everything as is. No registration required, no invisible magic going on under the hood, no cloud hosting or setup required. It would work even if there is no internet connection, which doesn't make sense, because without internet I can't open the links anyway, but hey.</p> <h2 id="product"><a href="#product" class="header-anchor">#</a> Product</h2> <p><img src="/img/dragndrop-startpage/demo.gif" alt="Preview of website"></p> <h2 id="features"><a href="#features" class="header-anchor">#</a> Features</h2> <p>The code can be viewed in this <a href="https://github.com/emmertarmin/startpage" target="_blank" rel="noopener noreferrer">repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="initialization"><a href="#initialization" class="header-anchor">#</a> Initialization</h3> <p>Every link and folder has an id, and a parent folder they belong to. At initialization, the zeroth folder always gets generated and displayed, paving the way for the database to get read and placed inside it nicely. If no database is to be found, an example one will show with one folder and one link.</p> <h3 id="add-new-element"><a href="#add-new-element" class="header-anchor">#</a> Add new element</h3> <p>A link basically just needs a name to click on, and a URL. So I thought, if no URL is provided, then make the object a folder instead. Just drag the bottom element wherever you want to place it and you're done.</p> <p>What also works is dropping either an existing element on the bottom input bar, or dropping a website itself as we're used to when quickly saving bookmarks. The link contained in the dropped element will fill the URL input field, and if it was an element from the startpage, or a folder, then the Name filed will populate too. This is currently the only way to edit links: extract them this way, rewrite it, and dropping it back. The original has to be deleted manually. I'm not entirely sure how the editing process could be made easier, but I rarely need to do that, and sometimes I just edit the json file directly. It would be nice to have a shift-click or similar function to edit an element, maybe.</p> <h3 id="delete-element"><a href="#delete-element" class="header-anchor">#</a> Delete element</h3> <p>To delete a link, it just has to be dropped on the Delete button in the bottom right corner. A popup will ask whether we're sure, and if we are, it will happen. If a folder is deleted, every single element contained within it will get deleted too.</p> <h3 id="save-changes"><a href="#save-changes" class="header-anchor">#</a> Save changes</h3> <p>Right now the way I handle the database is it's basically a JavaScript file that simply declares a json variable. At the beginning of the html file it is imported, and thus the json data can be handled.</p> <p>Whenever the structure changes, it is the user's duty to &quot;save&quot; changes, which consists of generating a new JavaScript file and offering it for download. I realize this is not ideal, as it could be automated. The bottleneck is that normally, browsers handle JavaScript in a sandbox, and don't give it access to the file system. In this perspective, user interaction in form of downloading and saving a file is required. I researched a little bit more though, and found out about <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" target="_blank" rel="noopener noreferrer">localStorage<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, where the browser can be asked automatically to save and remember data. This would obviously not work across browsers, but within one it would work more seamlessly. Perhaps one day I'll look into it more.</p> <p>When the json data structure is being assembled, there's a check that looks whether every element does have any existing parent at all. Unreachable branches in the tree should not need to be saved, so they get deleted. This should theoretically not be a scenario, because children of deleted folders get deleted too, but I thought it makes sense to prepare to keep the data clean. Perhaps a few safety features would be warranted, as there currently is no alert to the user whether items have been deleted this way.</p> <h3 id="little-extra"><a href="#little-extra" class="header-anchor">#</a> Little Extra</h3> <p>The bigger and deeper the database gets, the more likely I'll start to forget what I even put in there. To help me remember all the things I saved, I display a random link on top of the site. When it's something I don't remember, I open it to check it out. By the way, clicking with the middle mouse button opens link on a new tab right away without changing tabs, and clicking on tabs with the middle mouse button closes them. Ctrl+W will close the current tab. Knowing this I always set up my browser to not display the &quot;close&quot; button on the tab, so there's more real estate left for useful info, namely titles of the websites.</p> <h2 id="caution"><a href="#caution" class="header-anchor">#</a> Caution</h2> <p>As of right now, dragging folders inside of them is permitted, but clearly shouldn't be. Also, when changes are made, the little &quot;save&quot; icon shakes a little, but it would be better if closing the tab (or the browser) would prompt an alert about unsaved changes.</p> <p>Also I would say it makes sense to some times save a copy of the json file, or to save it in a Dropbox folder with version history or something like that, as I haven't tested the site in any professional way. I tested it manually in whichever ways I came up with, but it's better to be cautious.</p></div> <div class="page-edit" data-v-3a1d69e6><!----> <!----></div> <!----> </div> <!----> <div class="footer"><div class="socials"><a href="https://github.com/emmertarmin" class="social"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#bebebe" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a> <a href="https://www.linkedin.com/in/emmertarmin/" class="social"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2c3e50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a> <a href="https://twitter.com/emmertarmin" class="social"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2c3e50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a> <a href="https://www.instagram.com/emmertarmin/" class="social"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#bebebe" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-instagram"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg></a> <a href="https://www.youtube.com/channel/UCXUajPkahDrJzNNLtbYUQuA" class="social"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2c3e50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-youtube"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg></a> <a href="https://www.facebook.com/emmertarmin" class="social"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#bebebe" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-facebook"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg></a> <a href="/rss.xml" class="social"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2c3e50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div> <small>© Copyright 2021, Armin Antal Emmert</small></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.aa9a9412.js" defer></script><script src="/assets/js/4.dd5e842c.js" defer></script><script src="/assets/js/11.940eb2b5.js" defer></script><script src="/assets/js/27.f51c2c29.js" defer></script>
  </body>
</html>
