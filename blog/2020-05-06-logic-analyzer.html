<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Logic Analyzer Fun | Armin Emmert</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon.png">
    <link rel="icon" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <link rel="preload" href="/assets/css/0.styles.2ffeeb0a.css" as="style"><link rel="preload" href="/assets/js/app.38c26cc9.js" as="script"><link rel="preload" href="/assets/js/4.bff238d6.js" as="script"><link rel="preload" href="/assets/js/10.722332ea.js" as="script"><link rel="preload" href="/assets/js/20.04b63a0a.js" as="script"><link rel="prefetch" href="/assets/js/11.7180a7f4.js"><link rel="prefetch" href="/assets/js/12.25114987.js"><link rel="prefetch" href="/assets/js/13.3e0a2844.js"><link rel="prefetch" href="/assets/js/14.0cf483ae.js"><link rel="prefetch" href="/assets/js/15.b87f657d.js"><link rel="prefetch" href="/assets/js/16.cefb43c7.js"><link rel="prefetch" href="/assets/js/17.646fb3b8.js"><link rel="prefetch" href="/assets/js/18.5095d99d.js"><link rel="prefetch" href="/assets/js/19.8da4a7ac.js"><link rel="prefetch" href="/assets/js/21.40a345f7.js"><link rel="prefetch" href="/assets/js/22.a9fa5f24.js"><link rel="prefetch" href="/assets/js/23.a02ebe32.js"><link rel="prefetch" href="/assets/js/24.6190d380.js"><link rel="prefetch" href="/assets/js/25.f7997151.js"><link rel="prefetch" href="/assets/js/26.b2717aa0.js"><link rel="prefetch" href="/assets/js/3.ee061814.js"><link rel="prefetch" href="/assets/js/5.3b390cd4.js"><link rel="prefetch" href="/assets/js/6.4ddd56a0.js"><link rel="prefetch" href="/assets/js/7.051e17b8.js"><link rel="prefetch" href="/assets/js/8.3d762ec6.js"><link rel="prefetch" href="/assets/js/9.da0a3478.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.1c5b5b65.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2ffeeb0a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/vuepress-blog-logo.png" alt="Armin Emmert" class="logo"> <span class="site-name can-hide">Armin Emmert</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/archive/" class="nav-link">Archive</a></div> <a href="https://github.com/emmertarmin/emmertarmin.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <div class="nav-item"><label class="switch"><input type="checkbox" id="darkmode" name="darkmode"> <span class="slider"></span></label></div></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/archive/" class="nav-link">Archive</a></div> <a href="https://github.com/emmertarmin/emmertarmin.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <div class="nav-item"><label class="switch"><input type="checkbox" id="darkmode" name="darkmode"> <span class="slider"></span></label></div></nav>  <!----> </div> <div class="blog" data-v-5ebcfcbc><div class="blog__header" data-v-5ebcfcbc><p class="publish-date" data-v-5ebcfcbc><time datetime="2020-05-06T16:00:00.000Z" data-v-5ebcfcbc>2020-05-06</time></p> <p data-v-5ebcfcbc>Time to read: 3 min read</p> <h1 class="blog__title" data-v-5ebcfcbc>Logic Analyzer Fun</h1></div> <div class="custom content__default" data-v-5ebcfcbc><p>It's been a few days since I haven't been able to locate the bottleneck in an I2C bus. I'm polling data from a vibration sensor, but can't seem to get the data rate as high as is being advertised. Actually, it's hard to tell just from code and debug info, on what rate I'm getting sensor data at all. And it's hard to &quot;imagine&quot; what really plays down in a 3200kHz communication protocol. Or to determine whether it's working at 3200Hz at all.</p> <p>Cue the term &quot;logic analyzer&quot;. I can't believe I haven't heard about that before. To be honest, I think I was generally too slow to catch up on the existence of any kind kind of hardware debug accessory. I knew I needed to get one!</p> <p>There's a great brand that I've heard many people recommend, but there's also cheap Chinese clones for a tenth of the price, that do just as much, and that nobody recommends. Not being able to resist a €10.99 purchase, I ordered one on eBay. Before even trying any free <a href="https://sigrok.org/">open source</a> software with it, I just tried the one from Saleae, which is also free, and it worked with the noname clone flawlessly.</p> <p>I don't know what I was expecting, but the usage of it is as trivial as it gets. Connect the channels to the logic level lines that you intend to sniff, connect ground too, assign the SDA and SCL to the matching channels inside the software, et violá. High and Low states get polled at 20MHz for a full second, and are then presented for analysis. The Saleae software decodes bytes even on hover, and translates them to hexadecimal, decimal, or ascii characters. The whole string of communication can then be exported to csv files too, if needed.</p> <p>Even without decoding, I instantly recognized some schemes. After requesting to read a register (3 separate bytes worth of blocks in the I2C clock channel) there would be an unnecessarily long looking string of bytes. Turns out I've been requesting a good 100-150 bytes of data through I2C instead of only asking for the 6 important registers of the sensor that I'm interested in. Prior to using a logic analyzer, I didn't imagine that such sloppiness could clog the bus.</p> <p>Thinking back now, I feel so stupid having used selfie cameras to check infra leds in the past. Often I've &quot;debugged&quot; by asking the MCU to toggle a led during a process, just so I can confirm it's doing stuff. Toggling leds however takes time, and is hard to see, when it's supposed to happen every millisecond. Now I can debug data lines without changing the code, like a pro.</p> <p>Lately I have been &quot;feeling an increasing need&quot; (=searching for an excuse) to buy an oscilloscope too, but this supercheap logic analyzer has got 99% of my needs covered for the foreseeable future (probably 100%, actually).</p></div> <div class="page-edit" data-v-5ebcfcbc><!----> <!----></div> <!----> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.38c26cc9.js" defer></script><script src="/assets/js/4.bff238d6.js" defer></script><script src="/assets/js/10.722332ea.js" defer></script><script src="/assets/js/20.04b63a0a.js" defer></script>
  </body>
</html>
